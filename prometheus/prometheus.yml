global:
  scrape_interval:     15s
  scrape_timeout:      10s
scrape_configs:
  - job_name: telegraf
    metrics_path: /metrics
    static_configs:
    - targets:
      - "telegraf:9273"

# Prometheus configuration for Pure Storage FlashArray1

  - job_name: 'purestorage-fa1'
    metrics_path: /metrics/array
    authorization:
      credentials: bc3ad32a-2ee7-45f2-e207-410f33dcf000
    params:
      endpoint: [sn1-x90r2-f06-33.puretec.purestorage.com]
    static_configs:
    - targets:
      - pure-fa-om-exporter:9490
      labels:
        location: US
        site: TestSite
        instance: FlashArray1
        env: 'Test Lab'

  - job_name: 'purestorage-fa1_volumes'
    metrics_path: /metrics/volumes
    authorization:
      credentials: bc3ad32a-2ee7-45f2-e207-410f33dcf000
    params:
      endpoint: [sn1-x90r2-f06-33.puretec.purestorage.com]

    static_configs:
    - targets:
      - pure-fa-om-exporter:9490
      labels:
        location: US
        site: TestSite
        instance: FlashArray1
        env: 'Test Lab'

  - job_name: 'purestorage-fa1_hosts'
    metrics_path: /metrics/hosts
    authorization:
      credentials: bc3ad32a-2ee7-45f2-e207-410f33dcf000
    params:
      endpoint: [sn1-x90r2-f06-33.puretec.purestorage.com]

    static_configs:
    - targets:
      - pure-fa-om-exporter:9490
      labels:
        location: US
        site: TestSite
        instance: FlashArray1
        env: 'Test Lab'

# For FlashArray2
  - job_name: 'purestorage-fa2'
    metrics_path: /metrics/array
    authorization:
      credentials: 0ec6e273-6c80-a458-70e3-9dffd980e77e
    params:
      endpoint: [sn1-x90r2-f07-27.puretec.purestorage.com]

    static_configs:
    - targets:
      - pure-fa-om-exporter:9490
      labels:
        location: US
        site: TestSite
        instance: FlashArray2
        env: 'Test Lab'

  - job_name: 'purestorage-fa2_volumes'
    metrics_path: /metrics/volumes
    authorization:
      credentials: 0ec6e273-6c80-a458-70e3-9dffd980e77e
    params:
      endpoint: [sn1-x90r2-f07-27.puretec.purestorage.com]

    static_configs:
    - targets:
      - pure-fa-om-exporter:9490
      labels:
        location: US
        site: TestSite
        instance: FlashArray2
        env: 'Test Lab'

  - job_name: 'purestorage-fa2_hosts'
    metrics_path: /metrics/hosts
    authorization:
      credentials: 0ec6e273-6c80-a458-70e3-9dffd980e77e
    params:
      endpoint: [sn1-x90r2-f07-27.puretec.purestorage.com]

    static_configs:
    - targets:
      - pure-fa-om-exporter:9490
      labels:
        location: US
        site: TestSite
        instance: FlashArray2
        env: 'Test Lab'

# For FlashArray3
  - job_name: 'purestorage-fa3'
    metrics_path: /metrics/array
    authorization:
      credentials: 6a20f30a-2c4b-90eb-ada3-bcae602637a8
    params:
      endpoint: [sn1-x90r2-f06-27.puretec.purestorage.com]

    static_configs:
    - targets:
      - pure-fa-om-exporter:9490
      labels:
        location: US
        site: TestSite
        instance: FlashArray3
        env: 'Test Lab'

  - job_name: 'purestorage-fa3_volumes'
    metrics_path: /metrics/volumes
    authorization:
      credentials: 6a20f30a-2c4b-90eb-ada3-bcae602637a8
    params:
      endpoint: [sn1-x90r2-f06-27.puretec.purestorage.com]

    static_configs:
    - targets:
      - pure-fa-om-exporter:9490
      labels:
        location: US
        site: TestSite
        instance: FlashArray3
        env: 'Test Lab'

  - job_name: 'purestorage-fa3_hosts'
    metrics_path: /metrics/hosts
    authorization:
      credentials: 6a20f30a-2c4b-90eb-ada3-bcae602637a8
    params:
      endpoint: [sn1-x90r2-f06-27.puretec.purestorage.com]

    static_configs:
    - targets:
      - pure-fa-om-exporter:9490
      labels:
        location: US
        site: TestSite
        instance: FlashArray3
        env: 'Test Lab'



# Prometheus configuration for Pure Storage FlashBlade

  - job_name: 'purestorage-fb'
    metrics_path: /metrics/array
    authorization:
      credentials: T-24d61cd3-61e0-4419-9666-6a0c7607c38a
    params:
      endpoint: [sn1-s200-c09-33.puretec.purestorage.com]
    static_configs:
    - targets:
      - pure-fb-om-exporter:9491
      labels:
        location: US
        site: TestSite
        instance: FlashBlade1
        env: 'Test Lab'
